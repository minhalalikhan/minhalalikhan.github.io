{"version":3,"file":"js/443.49e601c0.js","mappings":"+bA2BA,MAAMA,GAASC,EAAAA,EAAAA,MAETC,EAAmB,KACvB,MAAMC,EAAW,IAAIC,EAAAA,IAErBC,EAAAA,EAAAA,KAAgBC,EAAAA,EAAAA,MAAWH,GACxBI,MAAMC,IAEL,IAAIC,GAASC,EAAAA,EAAAA,IAAWC,EAAAA,EAAI,SACxBC,GAAIC,EAAAA,EAAAA,IAAMJ,GAAQK,EAAAA,EAAAA,IAAM,QAAS,KAAMN,EAAIO,KAAKC,QAChDC,EAAW,IAEfC,EAAAA,EAAAA,IAAQN,GAAGL,MAAMY,IACfA,EAASC,KAAKC,SAASC,IACrBL,EAASM,KAAK,IAAKD,EAAIE,OAAQC,GAAIH,EAAIG,IAAvC,IAEER,EAASS,OAAS,EACpB1B,EAAOuB,KAAK,MAGZI,EAAAA,EAAAA,IAAOlB,EAAQ,CACbmB,YAAapB,EAAIO,KAAKa,YACtBZ,MAAOR,EAAIO,KAAKC,MAChBa,SAAUrB,EAAIO,KAAKc,WAClBtB,MAAK,KACNP,EAAOuB,KAAK,IAAZ,GAIH,GAjBH,IAsBDO,OAAOC,IACNC,MAAM,kBACNC,QAAQC,IAAIH,EAAZ,GA/BJ,E,gHC1BF,MAAMI,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://converse/./src/views/loginDashboard.vue","webpack://converse/./src/views/loginDashboard.vue?5b7a"],"sourcesContent":["<template>\n  <main class=\"login-dashboard\">\n    <h1>Welcome to Converse</h1>\n    <!--\n\n <div class=\"cta-options\">\n      <div class=\"login-panel\">\n        <h3>login</h3>\n      </div>\n      <div class=\"registration-panel\">\n        <h3>Registration</h3>\n        <h5>register with google</h5>\n        <button class=\"fa fa-google\" @click=\"SignInWithGoogle\"></button>\n      </div>\n    </div>\n  -->\n    <h2>SIgn In With Google</h2>\n    <button class=\"fa fa-google\" @click=\"SignInWithGoogle\"></button>\n  </main>\n</template>\n\n<script setup>\nimport { ref } from \"vue\";\nimport { getAuth, GoogleAuthProvider, signInWithPopup } from \"firebase/auth\";\nimport db from \"@/main\";\nimport { collection, getDocs, addDoc, query, where } from \"firebase/firestore\";\nimport { useRouter } from \"vue-router\";\nconst router = useRouter();\n\nconst SignInWithGoogle = () => {\n  const provider = new GoogleAuthProvider();\n\n  signInWithPopup(getAuth(), provider)\n    .then((res) => {\n      // 1. check is user exist in user-collection\n      let colref = collection(db, \"users\");\n      let q = query(colref, where(\"email\", \"==\", res.user.email));\n      let userList = [];\n\n      getDocs(q).then((snapshot) => {\n        snapshot.docs.forEach((doc) => {\n          userList.push({ ...doc.data(), id: doc.id });\n        });\n        if (userList.length > 0) {\n          router.push(\"/\");\n          // user exist\n        } else {\n          addDoc(colref, {\n            displayName: res.user.displayName,\n            email: res.user.email,\n            photoURL: res.user.photoURL,\n          }).then(() => {\n            router.push(\"/\");\n          });\n          // user doesnt exist\n          // 2. add to user-collection\n        }\n      });\n\n      //  router.push(\"/\");\n    })\n    .catch((error) => {\n      alert(\"sign In failed\");\n      console.log(error);\n    });\n};\n</script>\n\n<style scoped>\n/*  login-dashboard  */\n\n.login-dashboard {\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n}\n\n.login-dashboard h1 {\n  margin: 0 auto;\n}\n\n.login-dashboard h3,\nh2 {\n  margin: 40px auto;\n}\n\n.cta-options {\n  width: 100%;\n  display: flex;\n  flex: 1;\n}\n\n.login-panel {\n  flex: 1;\n  border-right: 1px solid gray;\n  display: flex;\n}\n\n.registration-panel {\n  flex: 1;\n  border-left: 1px solid gray;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.login-dashboard button {\n  margin: 0 auto;\n  font-size: 40px;\n  background-color: black;\n  color: white;\n  width: 60px;\n  height: 60px;\n}\n</style>\n","import script from \"./loginDashboard.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./loginDashboard.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./loginDashboard.vue?vue&type=style&index=0&id=3a2521c9&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Minhal\\\\OneDrive\\\\Desktop\\\\college\\\\minor-project\\\\converse\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3a2521c9\"]])\n\nexport default __exports__"],"names":["router","useRouter","SignInWithGoogle","provider","GoogleAuthProvider","signInWithPopup","getAuth","then","res","colref","collection","db","q","query","where","user","email","userList","getDocs","snapshot","docs","forEach","doc","push","data","id","length","addDoc","displayName","photoURL","catch","error","alert","console","log","__exports__"],"sourceRoot":""}